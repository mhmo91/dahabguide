steps:
# Install
- name: 'gcr.io/cloud-builders/npm:current'
  args: ['install']
# Lint
- name: 'gcr.io/cloud-builders/npm:current'
  args: ['run', 'lint']
# test
# - name: 'gcr.io/cloud-builders/npm:current'
#   args: ['run', 'test:headless']
# Build
- name: 'gcr.io/cloud-builders/npm:current'
  args: ['run', 'build-prod']
# Deploy
- name: 'gcr.io/$PROJECT_ID/firebase'
  args: ['use' , '${_FIREBASE_PROJECT}']
- name: 'gcr.io/$PROJECT_ID/firebase'
  args: ['deploy', '-- --only hosting:${_FIREBASE_TARGET}']
