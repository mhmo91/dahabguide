<mat-toolbar class="landing-toolbar bg-white mat-elevation-z1">
  <button aria-label="Menu" class="d-block d-lg-none" mat-icon-button (click)="this.toggleSideNav.emit()">
    <mat-icon>menu</mat-icon>
  </button>

  <dahab-toolbar-logo></dahab-toolbar-logo>

  <div class="flex-grow-1"></div>

  <section *ngIf="this.user$ | async as user; else login">
    <mat-spinner *ngIf="user.loading else userLoaded" diameter="25"></mat-spinner>
    <ng-template #userLoaded>
      <a class="profile-img cursor-pointer" [mat-menu-trigger-for]="userMenu">
        <img [src]="user.photoURL" width="30" height="30" alt="user photo" class="rounded-circle mat-elevation-z8">
      </a>

      <mat-menu #userMenu="matMenu">
        <div class="container d-flex overflow-hidden">
          <img mat-card-avatar height="45" [src]="user.photoURL" alt="user photo"
            class="rounded-circle mat-elevation-z8 mt-1">
          <!-- <mat-spinner diameter="45" *ngIf="busy"></mat-spinner> -->

          <div class="pl-2">
            <span class="text-capitalize">
              {{user.displayName}}</span>
            <p class="text-muted">{{user.email}}</p>
          </div>
        </div>
        <button aria-labelledby="signoutBtn" mat-menu-item (click)="this.signOut()">
          <mat-icon> exit_to_app </mat-icon>
          <span id="signoutBtn">Sign Out</span>
        </button>
      </mat-menu>

    </ng-template>
  </section>

  <ng-template #login>
    <button aria-labelledby="signIn" mat-flat-button color="accent" [matMenuTriggerFor]="loginMenu">
      <span id="signIn">Sign in</span>
    </button>
    <mat-menu #loginMenu="matMenu">
      <button aria-labelledby="signIn withFacebook" mat-menu-item class="text-center" (click)="logInWithFacebook()">
        <span class="align-middle" id="withFacebook"></span>
      </button>
      <button aria-labelledby="signIn withGoogle" class="text-center" mat-menu-item (click)="logInWithgoogle()">
        <span class="align-middle" id="withGoogle"></span>
      </button>
    </mat-menu>
  </ng-template>
</mat-toolbar>
